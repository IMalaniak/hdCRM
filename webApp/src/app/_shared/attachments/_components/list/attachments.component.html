<section class="app-content-box" [title]="'Attachments'">
  <section content *ngIf="attachments && attachments.length > 0" >
    <mat-table [dataSource]="attachments" class="mat-elevation-z8 table-attachments crm-table">
      <ng-container matColumnDef="icon">
        <mat-header-cell *matHeaderCellDef></mat-header-cell>
        <mat-cell *matCellDef="let item"><fa-icon [icon]="fileTypeIcon(item.title)"></fa-icon></mat-cell>
      </ng-container>
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef i18n="@@attachmentsComponentListTitle">Title</mat-header-cell>
        <mat-cell *matCellDef="let item"><span (click)="downloadFile(item.id, item.title)">{{item.title}}</span></mat-cell>
      </ng-container>
      <ng-container matColumnDef="type">
        <mat-header-cell *matHeaderCellDef i18n="@@attachmentsComponentListType">Type</mat-header-cell>
        <mat-cell *matCellDef="let item">{{item.type}}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="createdAt">
        <mat-header-cell *matHeaderCellDef i18n="@@attachmentsComponentListCreatedAt">Created At</mat-header-cell>
        <mat-cell *matCellDef="let item">{{item.createdAt | date: 'short' }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="updatedAt">
        <mat-header-cell *matHeaderCellDef i18n="@@attachmentsComponentListUpdatedAt">Updated At</mat-header-cell>
        <mat-cell *matCellDef="let item">{{item.updatedAt | date: 'short' }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="actions" stickyEnd >
        <mat-header-cell *matHeaderCellDef i18n="@@globalsListActions"></mat-header-cell>
        <mat-cell *matCellDef="let item">
            <button class="trash" mat-icon-button (click)="handleDeleteFile(item.id)">
              <fa-icon [icon]="['fas', 'trash-alt']"></fa-icon>
            </button>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  </section>

  <section content *ngIf="attachments && attachments.length === 0 && !uploaderVisible" class="no-content">
    <p class="lead p-4 text-center" i18n="@@attachmentsComponentNoContentInfo">
      No content
    </p>
  </section>

  <div content *ngIf="uploaderVisible">
    <file-pond #uploader [options]="uploaderOptions"></file-pond>
  </div>

  <div buttons>
    <button *ngIf="!uploaderVisible" mat-raised-button class="crm-button" (click)="onClickAddFiles()"><fa-icon [icon]="['fas', 'folder-plus']"></fa-icon><span i18n="@@attachmentsComponentActionsAddFiles">Add files</span></button>
    <button *ngIf="uploaderVisible" mat-raised-button class="crm-button" (click)="onClickAddFilesDone()"><fa-icon [icon]="['fas', 'check']"></fa-icon><span i18n="@@attachmentsComponentActionsAddFiles">Done</span></button>
  </div>
</section>
