<section class="register-wrapper">
  <div class="container-fluid h-100">
    <div class="row h-100">
      <div class="col-sm-12 col-md-8 register-form">
        <mat-card>
          <mat-card-content>
            <h3 class="register-form-title" i18n="@@registerUserComponentFormHeaderTitleRegister">
              Register your HDCRM Account
            </h3>
            <mat-vertical-stepper linear #stepper>
              <mat-step [stepControl]="registerData.get('userCredentials')" state="edit">
                <ng-template matStepLabel i18n="@@registerUserComponentStepperLabelsGeneralInformation"
                  >General information</ng-template
                >
                <form [formGroup]="registerData.get('userCredentials')" class="d-flex flex-column">
                  <!-- Login -->
                  <atoms-form-field label="Login" [control]="getControl('userCredentials', 'login')"></atoms-form-field>

                  <!-- Email -->
                  <atoms-form-field
                    label="Email"
                    [inputType]="inputTypes.EMAIL"
                    [control]="getControl('userCredentials', 'email')"
                  ></atoms-form-field>

                  <!-- Password -->
                  <atoms-form-field
                    *ngIf="!getControl('userCredentials', 'generatePassword').value"
                    label="Password"
                    [inputType]="hidePassword ? inputTypes.PASSWORD : inputTypes.TEXT"
                    [control]="getControl('userCredentials', 'password')"
                  >
                    <mat-icon
                      suffix
                      (click)="hidePassword = !hidePassword"
                      [svgIcon]="icons[hidePassword ? 'eyeDisabled' : 'eye']"
                    ></mat-icon>
                  </atoms-form-field>

                  <!-- Generate Password -->
                  <atoms-form-field
                    color="warn"
                    label="Generate password for me and send it to my email"
                    [control]="getControl('userCredentials', 'generatePassword')"
                    [fType]="fieldTypes.CHECKBOX"
                  ></atoms-form-field>
                </form>
                <div class="d-flex justify-content-end pt-3">
                  <atoms-icon-button [matType]="matButtonTypes.STROKED" (onclick)="stepper.next()" [icon]="icons.right">
                    {{ actionLabels.NEXT }}
                  </atoms-icon-button>
                </div>
              </mat-step>
              <mat-step [stepControl]="registerData.get('userPersonalInfo')" state="edit">
                <ng-template matStepLabel i18n="@@registerUserComponentStepperLabelsContactInformation"
                  >Contact information</ng-template
                >
                <form [formGroup]="registerData.get('userPersonalInfo')" class="d-flex flex-column">
                  <!-- Name -->
                  <atoms-form-field label="Name" [control]="getControl('userPersonalInfo', 'name')"></atoms-form-field>

                  <!-- Surname -->
                  <atoms-form-field
                    label="Surname"
                    [control]="getControl('userPersonalInfo', 'surname')"
                  ></atoms-form-field>

                  <!-- Phone -->
                  <atoms-form-field
                    label="Phone"
                    [inputType]="inputTypes.TEL"
                    [control]="getControl('userPersonalInfo', 'phone')"
                  >
                    <span prefix>+ &nbsp;</span>
                  </atoms-form-field>
                </form>
                <div class="d-flex justify-content-between">
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    (onclick)="stepper.previous()"
                    [icon]="icons.left"
                  >
                    {{ actionLabels.BACK }}
                  </atoms-icon-button>
                  <atoms-icon-button [matType]="matButtonTypes.STROKED" (onclick)="stepper.next()" [icon]="icons.right">
                    {{ actionLabels.NEXT }}
                  </atoms-icon-button>
                </div>
              </mat-step>
              <mat-step [stepControl]="registerData.get('userOrganization')" state="done">
                <ng-template matStepLabel i18n="@@registerUserComponentStepperLabelsOrganizationInformation"
                  >Organization information</ng-template
                >
                <form [formGroup]="registerData.get('userOrganization')" class="d-flex flex-column">
                  <!-- Company type -->
                  <atoms-form-field
                    class="mt-1 mb-4"
                    [fType]="fieldTypes.RADIOGROUP"
                    [options]="[
                      { label: 'Company', value: orgTypes.COMPANY },
                      { label: 'Private', value: orgTypes.PRIVATE }
                    ]"
                    [control]="getControl('userOrganization', 'type')"
                  ></atoms-form-field>

                  <!-- Company name -->
                  <atoms-form-field
                    *ngIf="getControl('userOrganization', 'type').value === orgTypes.COMPANY"
                    label="Company name"
                    [control]="getControl('userOrganization', 'title')"
                  ></atoms-form-field>

                  <!-- Web site address -->
                  <atoms-form-field
                    *ngIf="
                      getControl('userOrganization', 'title').value ||
                      getControl('userOrganization', 'type').value === orgTypes.PRIVATE
                    "
                    label="Web site address"
                    [inputType]="inputTypes.URL"
                    [control]="getControl('userOrganization', 'website')"
                  ></atoms-form-field>

                  <mat-accordion *ngIf="getControl('userOrganization', 'type').value === orgTypes.COMPANY">
                    <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title> Company information </mat-panel-title>
                        <mat-panel-description> You can fill in this fields later </mat-panel-description>
                      </mat-expansion-panel-header>
                      <!-- Number of employees -->
                      <atoms-form-field
                        label="Number of employees"
                        [fType]="fieldTypes.SELECT"
                        [options]="[
                          {
                            label: '1-10',
                            value: '1-10'
                          },
                          {
                            label: '11-50',
                            value: '11-50'
                          },
                          {
                            label: '51-250',
                            value: '51-250'
                          },
                          {
                            label: '250+',
                            value: '250+'
                          }
                        ]"
                        [control]="getControl('userOrganization', 'employees')"
                      ></atoms-form-field>

                      <!-- Country -->
                      <atoms-form-field
                        label="Country"
                        [control]="getControl('userOrganization', 'country')"
                      ></atoms-form-field>
                      <!-- City -->
                      <atoms-form-field
                        label="City"
                        [control]="getControl('userOrganization', 'city')"
                      ></atoms-form-field>
                      <!-- Address -->
                      <atoms-form-field
                        label="Address"
                        [control]="getControl('userOrganization', 'address')"
                      ></atoms-form-field>
                      <!-- Postcode -->
                      <atoms-form-field
                        label="Postcode"
                        [control]="getControl('userOrganization', 'postcode')"
                      ></atoms-form-field>
                      <!-- Phone -->
                      <atoms-form-field
                        label="Phone"
                        [inputType]="inputTypes.TEL"
                        [control]="getControl('userOrganization', 'phone')"
                      ></atoms-form-field>
                      <!-- Email -->
                      <atoms-form-field
                        label="Email"
                        [inputType]="inputTypes.EMAIL"
                        [control]="getControl('userOrganization', 'email')"
                      ></atoms-form-field>
                    </mat-expansion-panel>
                  </mat-accordion>
                </form>
                <div class="d-flex justify-content-between">
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    (onclick)="stepper.previous()"
                    [icon]="icons.left"
                  >
                    {{ actionLabels.BACK }}
                  </atoms-icon-button>
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    [color]="themePalette.WARN"
                    (onclick)="stepper.reset()"
                    [icon]="icons.reset"
                  >
                    {{ actionLabels.RESET }}
                  </atoms-icon-button>
                </div>
              </mat-step>
              <!-- Icon overrides. -->
              <ng-template matStepperIcon="edit">
                <mat-icon [svgIcon]="icons.stepperEdit"></mat-icon>
              </ng-template>
              <ng-template matStepperIcon="done">
                <mat-icon [svgIcon]="icons.stepperDone"></mat-icon>
              </ng-template>
            </mat-vertical-stepper>
            <div class="d-flex justify-content-end btn-register">
              <atoms-icon-button
                [icon]="icons.submit"
                [isLoading]="isLoading$ | async"
                [disabled]="registerData.invalid || (isLoading$ | async)"
                (onclick)="onRegisterSubmit()"
              >
                {{ actionLabels.SUBMIT }}
              </atoms-icon-button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
      <div class="col-sm-12 col-md-4 register-login">
        <div class="d-flex flex-column text-white">
          <h2>Already registered?</h2>
          <p>Instantly go back into your HDCRM dashboard below.</p>
          <atoms-icon-button [routerLink]="loginRoute" [icon]="icons.right">
            {{ actionLabels.LOG_IN }}
          </atoms-icon-button>
        </div>
      </div>
    </div>
  </div>
</section>
