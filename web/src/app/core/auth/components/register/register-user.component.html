<section class="register-wrapper">
  <div class="container-fluid h-100">
    <div class="row h-100">
      <div class="col-sm-12 col-md-8 register-form">
        <mat-card>
          <mat-card-content>
            <h3 class="register-form-title" i18n="@@registerUserComponentFormHeaderTitleRegister">
              Register your HDCRM Account
            </h3>
            <mat-vertical-stepper linear #stepper>
              <mat-step [stepControl]="registerData.get('userCredentials')">
                <ng-template matStepLabel i18n="@@registerUserComponentStepperLabelsGeneralInformation"
                  >General information</ng-template
                >
                <form [formGroup]="registerData.get('userCredentials')" class="row d-flex flex-column">
                  <div class="col col-md">
                    <mat-form-field appearance="outline">
                      <mat-label i18n="@@registerUserComponentStepperInputPlaceholderLogin">Login</mat-label>
                      <input matInput formControlName="login" type="text" name="login" required />
                      <mat-error *ngIf="getControl('userCredentials', 'login').invalid">
                        <mat-error
                          *ngIf="getControl('userCredentials', 'login').errors.required"
                          i18n="@@registerUserComponentStepperInputErrorsLoginRequired"
                        >
                          Login is required!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userCredentials', 'login').errors.minlength"
                          i18n="@@registerUserComponentStepperInputErrorsLoginIsTooShort"
                        >
                          Login is too short!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userCredentials', 'login').errors.maxlength"
                          i18n="@@registerUserComponentStepperInputErrorsLoginIsTooLong"
                        >
                          Login is too long!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userCredentials', 'login').errors.pattern"
                          i18n="@@registerUserComponentStepperInputErrorsLoginIsInvalid"
                        >
                          Unallowed symbols are used!
                        </mat-error>
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col col-md">
                    <mat-form-field appearance="outline">
                      <mat-label i18n="@@registerUserComponentStepperInputPlaceholderEmail">Email</mat-label>
                      <input matInput formControlName="email" type="email" name="email" required />
                      <mat-error *ngIf="getControl('userCredentials', 'email').invalid">
                        <mat-error
                          *ngIf="getControl('userCredentials', 'email').errors.required"
                          i18n="@@registerUserComponentStepperInputErrorsEmailRequired"
                        >
                          Email is required!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userCredentials', 'email').errors.pattern"
                          i18n="@@registerUserComponentStepperInputErrorsBadEmail"
                        >
                          Invalid email address!
                        </mat-error>
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col col-md">
                    <mat-form-field
                      appearance="outline"
                      class="password-field"
                      *ngIf="!getControl('userCredentials', 'generatePassword').value"
                    >
                      <mat-label i18n="@@registerUserComponentStepperInputPlaceholderPassword">Password</mat-label>
                      <input
                        matInput
                        formControlName="password"
                        name="password"
                        [type]="hidePassword ? 'password' : 'text'"
                      />
                      <mat-icon matSuffix (click)="hidePassword = !hidePassword">{{
                        hidePassword ? 'visibility_off' : 'visibility'
                      }}</mat-icon>
                      <mat-error *ngIf="getControl('userCredentials', 'generatePassword').invalid">
                        <mat-error
                          *ngIf="getControl('userCredentials', 'generatePassword').errors.required"
                          i18n="@@registerUserComponentStepperInputErrorsPasswordRequired"
                        >
                          Password is required!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userCredentials', 'generatePassword').errors.minlength"
                          i18n="@@registerUserComponentStepperInputErrorsPasswordIsTooShort"
                        >
                          Password is too short!
                        </mat-error>
                      </mat-error>
                    </mat-form-field>

                    <molecules-form-field
                      [editForm]="true"
                      color="warn"
                      [control]="getControl('userCredentials', 'generatePassword')"
                      label="Generate password for me and send it to my email"
                      [fType]="fieldTypes.CHECKBOX"
                    ></molecules-form-field>
                  </div>
                </form>
                <div class="d-flex justify-content-end pt-3">
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    (onclick)="stepper.next()"
                    [icon]="['fas', 'arrow-right']"
                  >
                    {{ actionLabels.NEXT }}
                  </atoms-icon-button>
                </div>
              </mat-step>
              <mat-step [stepControl]="registerData.get('userPersonalInfo')">
                <ng-template matStepLabel i18n="@@registerUserComponentStepperLabelsContactInformation"
                  >Contact information</ng-template
                >
                <form [formGroup]="registerData.get('userPersonalInfo')" class="row d-flex flex-column">
                  <div class="col col-md">
                    <mat-form-field appearance="outline">
                      <mat-label i18n="@@registerUserComponentStepperInputPlaceholderName">Name</mat-label>
                      <input matInput formControlName="name" type="text" name="name" required />
                      <mat-error *ngIf="getControl('userPersonalInfo', 'name').invalid">
                        <mat-error
                          *ngIf="getControl('userPersonalInfo', 'name').errors.required"
                          i18n="@@registerUserComponentStepperInputErrorsNameRequired"
                        >
                          Name is required!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userPersonalInfo', 'name').errors.maxlength"
                          i18n="@@registerUserComponentStepperInputErrorsNameIsTooShort"
                        >
                          Name is too long!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userPersonalInfo', 'name').errors.pattern"
                          i18n="@@registerUserComponentStepperInputErrorsNameIsInvalid"
                        >
                          Unallowed symbols are used!
                        </mat-error>
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col col-md">
                    <mat-form-field appearance="outline">
                      <mat-label i18n="@@registerUserComponentStepperInputPlaceholderSurname">Surname</mat-label>
                      <input matInput formControlName="surname" type="text" name="surname" required />
                      <mat-error *ngIf="getControl('userPersonalInfo', 'surname').invalid">
                        <mat-error
                          *ngIf="getControl('userPersonalInfo', 'surname').errors.required"
                          i18n="@@registerUserComponentStepperInputErrorsSurnameRequired"
                        >
                          Surname is required!
                        </mat-error>
                        <mat-error
                          *ngIf="getControl('userPersonalInfo', 'surname').errors.pattern"
                          i18n="@@registerUserComponentStepperInputErrorsSurnameIsInvalid"
                        >
                          Unallowed symbols are used!
                        </mat-error>
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col col-md">
                    <mat-form-field appearance="outline">
                      <mat-label i18n="@@registerUserComponentStepperInputPlaceholderPhone">Phone</mat-label>
                      <input matInput formControlName="phone" type="tel" name="phone" />
                      <mat-error *ngIf="getControl('userPersonalInfo', 'phone').invalid">
                        <mat-error
                          *ngIf="getControl('userPersonalInfo', 'phone').errors.pattern"
                          i18n="@@registerUserComponentStepperInputErrorsPhoneIsInvalid"
                        >
                          Unallowed symbols are used!
                        </mat-error>
                      </mat-error>
                    </mat-form-field>
                  </div>
                </form>
                <div class="d-flex justify-content-between">
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    (onclick)="stepper.previous()"
                    [icon]="['fas', 'arrow-left']"
                  >
                    {{ actionLabels.BACK }}
                  </atoms-icon-button>
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    (onclick)="stepper.next()"
                    [icon]="['fas', 'arrow-right']"
                  >
                    {{ actionLabels.NEXT }}
                  </atoms-icon-button>
                </div>
              </mat-step>
              <mat-step [stepControl]="registerData.get('userOrganization')">
                <ng-template matStepLabel i18n="@@registerUserComponentStepperLabelsOrganizationInformation"
                  >Organization information</ng-template
                >
                <form [formGroup]="registerData.get('userOrganization')" class="row d-flex flex-column">
                  <div class="col col-md mt-1 mb-4">
                    <mat-radio-group formControlName="type">
                      <mat-radio-button class="mr-4" color="warn" value="company">Company</mat-radio-button>
                      <mat-radio-button color="warn" value="private">Private</mat-radio-button>
                    </mat-radio-group>
                  </div>
                  <mat-form-field
                    appearance="outline"
                    *ngIf="getControl('userOrganization', 'type').value === 'company'"
                  >
                    <mat-label i18n="@@registerUserComponentStepperInputPlaceholderCompanyTitle"
                      >Company name</mat-label
                    >
                    <input matInput formControlName="title" name="orgTitle" type="text" required />
                    <mat-error *ngIf="getControl('userOrganization', 'title').invalid">
                      <mat-error
                        *ngIf="getControl('userOrganization', 'title').errors.required"
                        i18n="@@registerUserComponentStepperInputErrorsCompanyTitleRequired"
                      >
                        Company name is required!
                      </mat-error>
                      <mat-error
                        *ngIf="getControl('userOrganization', 'title').errors.maxlength"
                        i18n="@@registerUserComponentStepperInputErrorsCompanyTitleIsTooLong"
                      >
                        Company name is too long!
                      </mat-error>
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline" *ngIf="getControl('userOrganization', 'title').value">
                    <mat-label i18n="@@registerUserComponentStepperInputPlaceholderSiteUrl">Web site address</mat-label>
                    <input matInput formControlName="website" name="orgWebsite" type="url" required />
                    <mat-error *ngIf="getControl('userOrganization', 'website').invalid">
                      <mat-error
                        *ngIf="getControl('userOrganization', 'website').errors.required"
                        i18n="@@registerUserComponentStepperInputErrorsWebSiteUrlRequired"
                      >
                        Web site is required!
                      </mat-error>
                      <mat-error
                        *ngIf="getControl('userOrganization', 'website').errors.pattern"
                        i18n="@@registerUserComponentStepperInputErrorsWebSiteIsInvalid"
                      >
                        Web site is invalid!
                      </mat-error>
                    </mat-error>
                  </mat-form-field>
                  <mat-accordion *ngIf="getControl('userOrganization', 'type').value === 'company'">
                    <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title> Company information </mat-panel-title>
                        <mat-panel-description> You can fill in this fields later </mat-panel-description>
                      </mat-expansion-panel-header>
                      <mat-form-field appearance="outline">
                        <mat-label i18n="@@registerUserComponentStepperInputPlaceholderCompanyEmployees"
                          >Number of employees</mat-label
                        >
                        <mat-select formControlName="employees" name="orgEmployees">
                          <mat-option value="1-10">1-10</mat-option>
                          <mat-option value="11-50">11-50</mat-option>
                          <mat-option value="51-250">51-250</mat-option>
                          <mat-option value="250+">250+</mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field appearance="outline">
                        <mat-label i18n="@@registerUserComponentStepperInputPlaceholderCompanyСountry"
                          >Country</mat-label
                        >
                        <input matInput formControlName="country" name="orgCountry" type="text" />
                      </mat-form-field>
                      <mat-form-field appearance="outline">
                        <mat-label i18n="@@registerUserComponentStepperInputPlaceholderOrganizationСity"
                          >City</mat-label
                        >
                        <input matInput formControlName="city" name="orgCity" type="text" />
                      </mat-form-field>
                      <mat-form-field appearance="outline">
                        <mat-label i18n="@@registerUserComponentStepperInputPlaceholderOrganizationСity"
                          >Address</mat-label
                        >
                        <input matInput formControlName="address" name="orgAddress" type="text" />
                      </mat-form-field>
                      <mat-form-field appearance="outline">
                        <mat-label i18n="@@registerUserComponentStepperInputPlaceholderOrganizationPostcode"
                          >Postcode</mat-label
                        >
                        <input matInput formControlName="postcode" name="orgPostcode" type="text" />
                      </mat-form-field>
                      <mat-form-field appearance="outline">
                        <mat-label i18n="@@registerUserComponentStepperInputPlaceholderPhone">Phone</mat-label>
                        <input matInput formControlName="phone" type="tel" name="orgPhone" />
                        <mat-error *ngIf="getControl('userOrganization', 'phone').invalid">
                          <mat-error
                            *ngIf="getControl('userOrganization', 'phone').errors.pattern"
                            i18n="@@registerUserComponentStepperInputErrorsOrganizationPhoneIsInvalid"
                          >
                            Unallowed symbols are used!
                          </mat-error>
                        </mat-error>
                      </mat-form-field>
                      <mat-form-field appearance="outline">
                        <mat-label i18n="@@registerUserComponentStepperInputPlaceholderOrganizationEmail"
                          >Email</mat-label
                        >
                        <input matInput formControlName="email" type="email" name="orgEmail" />
                        <mat-error *ngIf="getControl('userOrganization', 'email').invalid">
                          <mat-error
                            *ngIf="getControl('userOrganization', 'email').errors.pattern"
                            i18n="@@registerUserComponentStepperInputErrorsBadOrganizationEmail"
                          >
                            Invalid email address!
                          </mat-error>
                        </mat-error>
                      </mat-form-field>
                    </mat-expansion-panel>
                  </mat-accordion>
                </form>
                <div class="d-flex justify-content-between">
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    (onclick)="stepper.previous()"
                    [icon]="['fas', 'arrow-left']"
                  >
                    {{ actionLabels.BACK }}
                  </atoms-icon-button>
                  <atoms-icon-button
                    [matType]="matButtonTypes.STROKED"
                    [color]="themePalette.WARN"
                    (onclick)="stepper.reset()"
                    [icon]="['fas', 'trash-alt']"
                  >
                    {{ actionLabels.RESET }}
                  </atoms-icon-button>
                </div>
              </mat-step>
            </mat-vertical-stepper>
            <div class="d-flex justify-content-end btn-register">
              <atoms-icon-button
                [disabled]="registerData.invalid || (isLoading$ | async)"
                (onclick)="onRegisterSubmit()"
                [icon]="['fas', 'paper-plane']"
              >
                {{ actionLabels.SUMBIT }}
              </atoms-icon-button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
      <div class="col-sm-12 col-md-4 register-login">
        <div class="d-flex flex-column text-white">
          <h2>Already registered?</h2>
          <p>Instantly go back into your HDCRM dashboard below.</p>
          <atoms-icon-button [routerLink]="['/auth/login']" [icon]="['fas', 'arrow-right']">
            {{ actionLabels.LOG_IN }}
          </atoms-icon-button>
        </div>
      </div>
    </div>
  </div>
</section>
